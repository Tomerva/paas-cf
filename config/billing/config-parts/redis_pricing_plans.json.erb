<% plans = [
	{
		"name" => "tiny-clustered-3.2",
		"valid_from" => "2017-01-01",
		"guid" => "3a51701c-eef3-447c-882b-907ad2bcb7ab",
		"ha" => false,
		"aws_price" => price("elasticache_t2_micro")
	},
	{
    "name" => "tiny-3.2",
    "valid_from" => "2017-01-01",
    "guid" => "c84d1bef-9500-4ce9-88b2-c0bd421bbf8a",
    "ha" => false,
    "aws_price" => price("elasticache_t2_micro")
  },
  {
    "name" => "tiny-ha-3.2",
    "valid_from" => "2019-08-01",
    "guid" => "ea5c8cc3-74e6-4b15-bd61-bbe244cfe63d",
    "ha" => true,
    "aws_price" => price("elasticache_t2_small")
  },
  {
    "name" => "small-ha-3.2",
    "valid_from" => "2019-08-01",
    "guid" => "9162ed5b-0c88-4f43-bcaf-c6d4a45dd243",
    "ha" => true,
    "aws_price" => price("elasticache_t2_medium")
  },
  {
    "name" => "medium-ha-3.2",
    "valid_from" => "2019-08-01",
    "guid" => "b6949ea7-5c98-4c69-b981-4b5318ea8b7c",
    "ha" => true,
    "aws_price" => price("elasticache_m5_large")
  },

] %>

<% for @plan in plans %>
	{
		"name": "redis <%= @plan["name"] %>",
		"valid_from": "<%= @plan["valid_from"] %>",
		"plan_guid": "<%= @plan["guid"] %>",
		"number_of_nodes": <%= if @plan["ha"] then 2 else 1 end%>,
		"components": [
			{
				"name": "instance",
				"formula": "$number_of_nodes * ceil($time_in_seconds/3600) * <%= @plan["aws_price"] %>",
				"currency_code": "USD",
				"vat_code": "Standard"
			}
		]
	},
<% end %>
